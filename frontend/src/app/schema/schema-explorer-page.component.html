<main class="container" *ngIf="!loading; else loadingBlock">
  <div class="error" *ngIf="error">{{ error }}</div>

  <div *ngIf="!error" class="meta" [attr.data-test]="'schema-meta'">
    <p class="eyebrow">Swiss Technical Advisory</p>
    <h1 class="page-title">Schema Explorer</h1>
    <div *ngIf="summary">Namespace: {{ summary.targetNamespace }}</div>
  </div>

  <div *ngIf="!error" class="schema-layout" #layoutContainer>
    <section class="tree-pane" [style.width.px]="treePaneWidth">
      <div class="tree-toolbar">
        <button type="button" class="collapse-all-icon" matTooltip="Collapse all" aria-label="Collapse all" (click)="collapseAll()">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M4 8l4 4m0-4l-4 4M20 8l-4 4m0-4l4 4M4 16l4-4m0 4l-4-4M20 16l-4-4m0 4l4-4" />
          </svg>
        </button>
      </div>

      <app-schema-tree
        [root]="rootNode"
        [selectedNode]="selectedNode"
        (nodeSelected)="onNodeSelected($event)"
      ></app-schema-tree>
      <button
        type="button"
        class="resize-handle"
        aria-label="Resize schema tree width"
        (mousedown)="startResize($event)"
        (keydown)="onResizeHandleKeydown($event)">
      </button>
    </section>

    <section class="details-pane" #detailsPane>
      <app-schema-node-details [node]="selectedNode"></app-schema-node-details>
    </section>
  </div>
</main>

<ng-template #loadingBlock>
  <div class="loading">
    <mat-spinner diameter="36"></mat-spinner>
  </div>
</ng-template>
